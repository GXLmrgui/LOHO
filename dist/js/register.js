require(["config"],function(){require(["jquery","footer"],function(r,e){new Promise(function(e,n){r("#vcode").load("/html/component/code.html"),e()}).then(function(){});var t=[!1,!1,!1,!1];r("#phone").focus(function(){var e=r(this).parent();e.find(".msg").remove(),e.find(".rmsg").remove();e.append("<span class='msg'>手机号为国内11位有效号码</span>")}),r("#phone").blur(function(){var n=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,s=r(this).parent();s.find(".msg").remove(),s.find(".rmsg").remove();var a=r("#phone").val();a=r.trim(a),r.ajax({url:"http://localhost/LOHO/loho-gulp-require/projectserver/api/register.php",data:{username:a},method:"POST",dataType:"json",success:function(e){0===e.code?s.append("<span class='msg'>手机号已经被占用，请重新输入</span>"):n.test(a)?(s.append("<span class='rmsg'>手机号码有效</span>"),t[0]=!0):s.append("<span class='msg'>不是一个有效的手机号，请重新输入</span>")}})}),r("#pass1").focus(function(){var e=r(this).parent();e.find(".rmsg").remove(),e.find(".msg").remove();e.append("<span class='msg'>密码开头为字母，长度为6-12位</span>")}),r("#pass1").blur(function(){var e=r(this).parent(),n=r("#pass1").val();e.find(".rmsg").remove(),e.find(".msg").remove();/^[a-zA-Z]\w{5,11}$/.test(n)?(e.append("<span class='rmsg'>密码符合要求</span>"),t[1]=!0):e.append("<span class='msg'>密码不符合要求，请重新设置</span>")}),r("#pass2").blur(function(){var e=r("#pass1").val(),n=r("#pass2").val(),s=r(this).parent();s.find(".msg").remove();e!=n?s.append("<span class='msg'>密码不相同</span>"):(t[2]=!0,s.find(".msg").remove())}),r("#checkbox").attr("checked",!0)&&(t[3]=!0),r("#form").submit(function(e){e=e||event;var n=r("#phone").val();n=r.trim(n);var s=r("#pass1").val();s=r.trim(s);t.every(function(e){return e});return r.ajax({type:"POST",url:"http://localhost/LOHO/loho-gulp-require/projectserver/api/register2.php",data:{name:n,pass:s},dataType:"json",success:function(e){if(console.log(e),1!=e.code)return alert("注册失败"),!1;alert("注册成功"),window.location.href="/html/login.html"}}),e.preventDefault(),!1}),new Promise(function(e,n){r("footer").load("/html/component/footer.html",function(){e()})}).then(function(){})})});